# Hardware definitions for M5Stack Tab5 V2
# Display is upside-down landscape mode (USB port in the right)

packages:
  base: !include m5stack_tab5_v2_landscape.yaml

touchscreen:
  - id: !remove touch
  - platform: st7123
    id: touch
    i2c_id: bus_a
    interrupt_pin: GPIO23
    display: lcd
    update_interval: never
    reset_pin:
      pi4ioe5v6408: pi4ioe1
      number: 5      
    # NB: Those min/max values are *after* swapping (raw x is 0..720).
    calibration:
      x_min: 0
      x_max: 1280
      y_min: 0
      y_max: 720
    # Upside down landscape orientation
    transform:
      swap_xy: true
      mirror_x: false
      mirror_y: true
    on_release:
      - script.execute: activity_detected

display:
  - id: !remove lcd
  - platform: mipi_dsi
    id: lcd
    # Upside down landscape orientation
    rotation: 90
    dimensions:
      height: 1280
      width: 720
    model: M5STACK-TAB5-V2
    reset_pin:
      pi4ioe5v6408: pi4ioe1
      number: 4
